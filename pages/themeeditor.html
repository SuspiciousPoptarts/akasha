<head>
    <link rel="stylesheet" href="wiki.css">
    <link rel="stylesheet" href="root.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
</head>

<div style="padding: 32px">
    <button id="reset"><span class="icon padding-r8">&#xe28e;</span>Reset</button>
    <table class="w768">
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe9bb;</span>Badge URL</td>
            <td><input type="text" class="w100p" id="badge"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe920;</span>Badge Radius</td>
            <td><input type="text" class="w100p" id="badge-radius"></td>
        </tr>
    </table>

    <table class="w768">
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe9bb;</span>Body Margin</td>
            <td><input type="text" class="w100p" id="bg-margin"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe920;</span>Corner Radius</td>
            <td><input type="text" class="w100p" id="c-radius"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe8b5;</span>Universal Transition Time</td>
            <td><input type="text" class="w100p" id="utt"></td>
        </tr>
    </table>

    <table class="w768">
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe245;</span>Font</td>
            <td><input type="text" class="w100p" id="font"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe23a;</span>Background Color</td>
            <td><input type="color" class="w100p" id="bg-color"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe228;</span>Border Color</td>
            <td><input type="color" class="w100p" id="b-color"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xef8f;</span>Shadow Color</td>
            <td><input type="color" class="w100p" id="s-color"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe40a;</span>Accent Color</td>
            <td><input type="color" class="w100p" id="a-color"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xf82b;</span>Font Color</td>
            <td><input type="color" class="w100p" id="f-color"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe1d3;</span>Icon Color</td>
            <td><input type="color" class="w100p" id="i-color"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe231;</span>Border Style</td>
            <td><input type="text" class="w100p" id="b-style"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xf20a;</span>Accent Font Color</td>
            <td><input type="text" class="w100p" id="af-color"></td>
        </tr>
    </table>

    <table class="w768">
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xea16;</span>Slider Track Height</td>
            <td><input type="text" class="w100p" id="s-height"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe837;</span>Slider Knob Radius</td>
            <td><input type="text" class="w100p" id="s-radius"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe837;</span>Slider Knob Height</td>
            <td><input type="text" class="w100p" id="sk-height"></td>
        </tr>
    </table>

    <table class="w768">
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xf16a;</span>Pyro Accent</td>
            <td><input type="color" class="w100p" id="p-accent"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe798;</span>Hydro Accent</td>
            <td><input type="color" class="w100p" id="h-accent"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xea0b;</span>Electro Accent</td>
            <td><input type="color" class="w100p" id="e-accent"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xea35;</span>Dendro Accent</td>
            <td><input type="color" class="w100p" id="d-accent"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xeb3b;</span>Cryo Accent</td>
            <td><input type="color" class="w100p" id="c-accent"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xefd8;</span>Anemo Accent</td>
            <td><input type="color" class="w100p" id="a-accent"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe3f7;</span>Geo Accent</td>
            <td><input type="color" class="w100p" id="g-accent"></td>
        </tr>
    </table>

    <table class="w768">
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe8d0;</span>Five Star Accent</td>
            <td><input type="color" class="w100p" id="5-accent"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe8d0;</span>Four Star Accent</td>
            <td><input type="color" class="w100p" id="4-accent"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe8d0;</span>Three Star Accent</td>
            <td><input type="color" class="w100p" id="3-accent"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe8d0;</span>Two Star Accent</td>
            <td><input type="color" class="w100p" id="2-accent"></td>
        </tr>
        <tr>
            <td class="w256"><span class="icon padding-r8">&#xe8d0;</span>One Star Accent</td>
            <td><input type="color" class="w100p" id="1-accent"></td>
        </tr>
    </table>
</div>

<style>
    table {
        box-shadow: var(--card-shadow);
        border-radius: var(--corner-radius);
        margin-bottom: var(--component-margin);
        margin-right: var(--component-margin);

        border-collapse: collapse;
        overflow: hidden;
    }

    table tr:nth-of-type(1)>th {
        background-color: var(--accent-color);
        color: var(--accent-font-color);
        padding: var(--universal-padding);
    }

    table th {
        position: relative;
        background-color: var(--border-color);
        border-color: var(--background-color);
        padding: var(--universal-padding);
    }

    table th span {
        color: var(--accent-font-color) !important;
    }

    table td {
        position: relative;
        border-right: var(--border-color) solid 2px;
        border-bottom: var(--border-color) solid 2px;
        padding: var(--universal-padding);
    }

    th:hover {
        transition: var(--universal-transition-time);
        filter: var(--hover-brightness);
    }

    table td:last-child,
    th:last-child {
        border-right: none;
        border-right: none;
    }

    table tr:last-child>td {
        border-bottom: none;
    }
</style>

<script>
    function resetStyle() {
        let style = `
        :root {
                --badge: url(https://static.wikia.nocookie.net/gensin-impact/images/b/b5/Icon_Emoji_Paimon%27s_Paintings_19_Nahida_1.png/revision/latest?cb=20221124043001);
                --badge-radius:  32px;
            /* MARGINS AND PADDINGS */
                --body-margin: 16px;
                --universal-padding: 16px; /* Changing padding also makes flex widths incosistent! */
                --component-margin: 16px; /* Chaning padding causes layouts to change significantly! */
                --corner-radius: 8px;
            
                --universal-transition-time: all 0.25s;
                --hover-brightness: brightness(110%);
                --click-brightness: brightness(90%);
                --highlight-color: #7381d1; /* Highlighted text is always white! */
            
                font-family: 'Roboto Flex';
            
                --background-color:#3b4255;
                --border-color:#5c6284;
                --shadow-color:#242632;
                --accent-color:#ede5d8;
                --accent-font-color: var(--background-color);
                --font-color:#f6f3ec;
                --icon-color:#e0e0e0;
            
                --border-style: solid;
            
                /* SLIDERS */
                --slider-height: 6px;
                --slider-knob-radius: 50%;
                --slider-knob-height: 14px;
            
                /* ELEMENTAL ACCENTS */
                --pyro-accent:#d24646;
                --hydro-accent:#4487d5;
                --electro-accent:#9f79d7;
                --dendro-accent:#cfda72;
                --cryo-accent:#a1cee2;
                --anemo-accent:#79cda9;
                --geo-accent:#e4ca86;
                /* RARITY ACCENTS */
                --five-star-accent:#d3a15a;
                --four-star-accent:#a083d2;
                --three-star-accent:#5594dd;
                --two-star-accent:#98aab3;
                --one-star-accent:#ababab;
            
                --card-shadow: var(--shadow-color) 0px 0px 6px;
            
                background-color: var(--background-color);
                color: var(--font-color);
            
                transition: var(--universal-transition-time);
                --inset-shadow: inset var(--shadow-color) 0px 0px 6px;
        }
            
        ::selection {
            background-color: var(--highlight-color);
            color: white;
        }
    `;
        window.electronAPI.sendTheme(style);
    }

    $("#reset").click(function (e) {
        resetStyle();
    })

    function compileStyle() {
        let style = `
            :root {
                --badge: url(${$("#badge").val()});
                --badge-radius: ${$("#badge-radius").val()};
            /* MARGINS AND PADDINGS */
                --body-margin:${$("#bg-margin").val()};
                --universal-padding: 16px; /* Changing padding also makes flex widths incosistent! */
                --component-margin: 16px; /* Chaning padding causes layouts to change significantly! */
                --corner-radius:${$("#c-radius").val()};
            
                --universal-transition-time:${$("#utt").val()};
                --hover-brightness: brightness(110%);
                --click-brightness: brightness(90%);
                --highlight-color: #7381d1; /* Highlighted text is always white! */
            
                font-family:${$("#font").val()};
            
                --background-color:${$("#bg-color").val()};
                --border-color:${$("#b-color").val()};
                --shadow-color:${$("#s-color").val()};
                --accent-color:${$("#a-color").val()};
                --accent-font-color:${$("#af-color").val()};
                --font-color:${$("#f-color").val()};
                --icon-color:${$("#i-color").val()};
            
                --border-style:${$("#b-style").val()};
            
                /* SLIDERS */
                --slider-height:${$("#s-height").val()};
                --slider-knob-radius:${$("#s-radius").val()};
                --slider-knob-height:${$("#sk-height").val()};
            
                /* ELEMENTAL ACCENTS */
                --pyro-accent:${$("#p-accent").val()};
                --hydro-accent:${$("#h-accent").val()};
                --electro-accent:${$("#e-accent").val()};
                --dendro-accent:${$("#d-accent").val()};
                --cryo-accent:${$("#c-accent").val()};
                --anemo-accent:${$("#a-accent").val()};
                --geo-accent:${$("#g-accent").val()};
                /* RARITY ACCENTS */
                --five-star-accent:${$("#5-accent").val()};
                --four-star-accent:${$("#4-accent").val()};
                --three-star-accent:${$("#3-accent").val()};
                --two-star-accent:${$("#2-accent").val()};
                --one-star-accent:${$("#1-accent").val()};
            
                --card-shadow: var(--shadow-color) 0px 0px 6px;
            
                background-color: var(--background-color);
                color: var(--font-color);
            
                transition: var(--universal-transition-time);
                --inset-shadow: inset var(--shadow-color) 0px 0px 6px;
        }
            
        ::selection {
            background-color: var(--highlight-color);
            color: white;
        }
    `;
        window.electronAPI.sendTheme(style);
    }

    fetch("theme.css")
        .then(response => response.text())
        .then(text => {
            $("#badge").val(/(--badge):(.+?);/g.exec(text)[2].slice(5).slice(0, this.length-1));
            $("#badge-radius").val(/(--badge-radius):(.+?);/g.exec(text)[2]);

            $("#bg-margin").val(/(--body-margin):(.+?);/g.exec(text)[2]);
            $("#c-radius").val(/(--corner-radius):(.+?);/g.exec(text)[2]);
            $("#utt").val(/(--universal-transition-time):(.+?);/g.exec(text)[2]);

            $("#font").val(/(font-family):(.+?);/g.exec(text)[2]);
            $("#bg-color").val(/(--background-color):(.+?);/g.exec(text)[2].replaceAll(" ",""));
            $("#b-color").val(/(--border-color):(.+?);/g.exec(text)[2].replaceAll(" ",""));
            $("#s-color").val(/(--shadow-color):(.+?);/g.exec(text)[2].replaceAll(" ",""));
            $("#a-color").val(/(--accent-color):(.+?);/g.exec(text)[2].replaceAll(" ",""));
            $("#af-color").val(/(--accent-font-color):(.+?);/g.exec(text)[2]);
            $("#f-color").val(/(--font-color):(.+?);/g.exec(text)[2].replaceAll(" ",""));
            $("#i-color").val(/(--icon-color):(.+?);/g.exec(text)[2].replaceAll(" ",""));
            $("#b-style").val(/(--border-style):(.+?);/g.exec(text)[2]);

            $("#s-height").val(/(--slider-height):(.+?);/g.exec(text)[2]);
            $("#s-radius").val(/(--slider-knob-radius):(.+?);/g.exec(text)[2]);
            $("#sk-height").val(/(--slider-knob-height):(.+?);/g.exec(text)[2]);

            $("#p-accent").val(/(--pyro-accent):(.+?);/g.exec(text)[2].replaceAll(" ",""));
            $("#h-accent").val(/(--hydro-accent):(.+?);/g.exec(text)[2].replaceAll(" ",""));
            $("#e-accent").val(/(--electro-accent):(.+?);/g.exec(text)[2].replaceAll(" ",""));
            $("#d-accent").val(/(--dendro-accent):(.+?);/g.exec(text)[2].replaceAll(" ",""));
            $("#c-accent").val(/(--cryo-accent):(.+?);/g.exec(text)[2].replaceAll(" ",""));
            $("#a-accent").val(/(--anemo-accent):(.+?);/g.exec(text)[2].replaceAll(" ",""));
            $("#g-accent").val(/(--geo-accent):(.+?);/g.exec(text)[2].replaceAll(" ",""));

            $("#5-accent").val(/(--five-star-accent):(.+?);/g.exec(text)[2].replaceAll(" ",""));
            $("#4-accent").val(/(--four-star-accent):(.+?);/g.exec(text)[2].replaceAll(" ",""));
            $("#3-accent").val(/(--three-star-accent):(.+?);/g.exec(text)[2].replaceAll(" ",""));
            $("#2-accent").val(/(--two-star-accent):(.+?);/g.exec(text)[2].replaceAll(" ",""));
            $("#1-accent").val(/(--one-star-accent):(.+?);/g.exec(text)[2].replaceAll(" ",""));

        });

    $("#badge").change(function (event) {
        compileStyle()
    });
    $("#badge-radius").change(function (event) {
        compileStyle()
    });

    $("#bg-margin").change(function (event) {
        compileStyle()
    });
    $("#c-radius").change(function (event) {
        compileStyle()
    });
    $("#utt").change(function (event) {
        compileStyle()
    });

    $("#font").change(function (event) {
        compileStyle()
    });
    $("#bg-color").change(function (event) {
        compileStyle()
    });
    $("#b-color").change(function (event) {
        compileStyle()
    });
    $("#s-color").change(function (event) {
        compileStyle()
    });
    $("#a-color").change(function (event) {
        compileStyle()
    });
    $("#af-color").change(function (event) {
        compileStyle()
    });
    $("#f-color").change(function (event) {
        compileStyle()
    });
    $("#i-color").change(function (event) {
        compileStyle()
    });
    $("#b-style").change(function (event) {
        compileStyle()
    });

    $("#s-height").change(function (event) {
        compileStyle()
    });
    $("#s-radius").change(function (event) {
        compileStyle()
    });
    $("#sk-height").change(function (event) {
        compileStyle()
    });

    $("#p-accent").change(function (event) {
        compileStyle()
    });
    $("#h-accent").change(function (event) {
        compileStyle()
    });
    $("#e-accent").change(function (event) {
        compileStyle()
    });
    $("#d-accent").change(function (event) {
        compileStyle()
    });
    $("#c-accent").change(function (event) {
        compileStyle()
    });
    $("#a-accent").change(function (event) {
        compileStyle()
    });
    $("#g-accent").change(function (event) {
        compileStyle()
    });

    $("#5-accent").change(function (event) {
        compileStyle()
    });
    $("#4-accent").change(function (event) {
        compileStyle()
    });
    $("#3-accent").change(function (event) {
        compileStyle()
    });
    $("#2-accent").change(function (event) {
        compileStyle()
    });
    $("#1-accent").change(function (event) {
        compileStyle()
    });

</script>